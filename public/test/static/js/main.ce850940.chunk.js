(this.webpackJsonptagging_interface=this.webpackJsonptagging_interface||[]).push([[0],{27:function(e,t){e.exports="data:image/png;base64,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"},32:function(e,t,n){e.exports=n(47)},37:function(e,t,n){},38:function(e,t,n){e.exports=n.p+"static/media/redcoat-1-threshold.78b878cf.png"},39:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(13),s=n.n(o),r=(n(37),n(19)),l=n(31),c=n(2),u=n(3),p=n(5),d=n(4),h=n(27),m=n.n(h),g=(n(38),n(39),n(12)),f=n.n(g),v=n(20),y=n(25),b=(n(40),n(28)),E=n(29),k=n.n(E),S=n(11),w=n(6),j=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("article",{className:"features-list"},i.a.createElement("h2",null,"List of current features (v1.0, 5 April 2019)"),i.a.createElement("p",null,"Below is a list of features that are currently present in Redcoat."),i.a.createElement("ul",null,i.a.createElement("li",null," Project Setup page",i.a.createElement("ul",null,i.a.createElement("li",null,"Create annotation projects for Entity Recognition on the Setup Project page"),i.a.createElement("li",null,"Automatic tokenisation of data, with summary of number of tokens/documents"),i.a.createElement("li",null,"Create a concept hierarchy via an interactive tree, or alternatively via text input"),i.a.createElement("li",null,"Multiple built-in hierarchies: NER, FIGER, Mining"),i.a.createElement("li",null,"New project and associated data is persistent across refreshes"))),i.a.createElement("li",null,"Projects page",i.a.createElement("ul",null,i.a.createElement("li",null,"Sort, search, and filter projects"),i.a.createElement("li",null,"Detailed project summary"))),i.a.createElement("li",null,"Annotation interface",i.a.createElement("ul",null,i.a.createElement("li",null,"Annotate projects via an intuitive user interface"),i.a.createElement("li",null,"Keyboard support on the annotation interface (hotkeys, selection with arrow keys)"),i.a.createElement("li",null,"Wikipedia summary of words in the annotation interface"),i.a.createElement("li",null,"Search/filter category hierarchy to quickly find the relevant entity category ")))),i.a.createElement("h3",null,"Attributions"),i.a.createElement("p",null,"The pencil icon on the tagging interface was made by ",i.a.createElement("a",{href:"https://www.flaticon.com/authors/icongeek26",title:"Icongeek26"},"Icongeek26")," from ",i.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com"),"."))}}]),n}(a.Component),C=n(41);function I(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}var x=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("nav",{id:"navbar"},i.a.createElement("div",{className:"navbar-left"},i.a.createElement("div",{id:"logo"},i.a.createElement(S.b,{to:"/"},i.a.createElement("span",{className:"inner"},i.a.createElement("span",{className:"img"},i.a.createElement("img",{src:m.a})),i.a.createElement("span",null,"Redcoat"))))),i.a.createElement("div",{className:"navbar-centre"},this.props.pageTitle),i.a.createElement("div",{className:"navbar-right"},this.props.username&&i.a.createElement("div",{className:"dropdown-menu"},i.a.createElement("button",null,"Projects"),i.a.createElement("ul",{className:"dropdown-menu-items"},i.a.createElement("li",null,i.a.createElement(S.b,{to:"/projects"},"Projects list")),i.a.createElement("li",null,i.a.createElement(S.b,{to:"/setup-project"},"Setup project")))),this.props.username&&i.a.createElement("div",{className:"dropdown-menu"},i.a.createElement("button",null,"Logged in as ",this.props.username),i.a.createElement("ul",{className:"dropdown-menu-items"},i.a.createElement("li",null,i.a.createElement(S.b,{to:"/profile"},"Profile")),i.a.createElement("li",null,i.a.createElement(S.b,{to:"/logout"},"Logout")))),!this.props.username&&i.a.createElement("div",{className:"dropdown-menu"},i.a.createElement("button",null,"Not logged in"),i.a.createElement("ul",{className:"dropdown-menu-items"},i.a.createElement("li",null,i.a.createElement(S.b,{to:"/login"},"Login")),i.a.createElement("li",null,i.a.createElement(S.b,{to:"/register"},"Register")))),i.a.createElement("div",{className:"dropdown-menu short"},i.a.createElement(S.b,{to:"/features"},"v1.0"))))}}]),n}(a.Component),N=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.item,a=this.props.index,o=this.props.item.children;if(o)var s=i.a.createElement("ul",{className:this.props.open?"":"hidden"},o.map((function(t,a){return i.a.createElement(n,{key:a,item:t,open:e.props.openedItems.has(t.full_name),openedItems:e.props.openedItems,onClick:e.props.onClick,hotkeyMap:e.props.hotkeyMap,hotkeyChain:e.props.hotkeyChain,isTopLevelCategory:!1,applyTag:e.props.applyTag})})));else s="";var r=this.props.hotkeyMap.hasOwnProperty(this.props.item.full_name),l=r?this.props.hotkeyMap[this.props.item.full_name].join(""):"",c=i.a.createElement("span",{className:"inner-container"},o&&i.a.createElement("span",{className:"open-button",onClick:function(){return e.props.onClick(t.full_name)}},i.a.createElement("i",{className:"fa fa-chevron-"+(this.props.open?"up":"down")})),i.a.createElement("span",{className:"category-name"+(r?" has-hotkey":"")+(this.props.hotkeyChain===l?" hotkey-active":""),"data-hotkey-id":l,onClick:function(){return e.props.applyTag(e.props.item.full_name)}},t.name));return this.props.isTopLevelCategory?i.a.createElement(v.b,{key:t.id.toString(),draggableId:t.id.toString(),index:a},(function(e,n){return i.a.createElement("li",Object.assign({ref:e.innerRef},e.draggableProps,{className:"draggable "+(n.isDragging?"dragging":"not-dragging")+" color-"+(t.colorId+1)}),i.a.createElement("div",Object.assign({},e.dragHandleProps,{className:"drag-handle-container"}),i.a.createElement("span",{className:"drag-handle"})),c,s)})):i.a.createElement("li",null,c,s)}}]),n}(a.Component);var O=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={itemOrder:[],orderedItems:[],openedItems:new Set},a.onDragEnd=a.onDragEnd.bind(Object(r.a)(a)),a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;var a=function(){for(var e=new Array(n.props.items.length),t=0;t<e.length;t++)e[t]=t;return e}();y.a.isEqual(e.items,this.props.items)||this.setState({openedItems:new Set,orderedItems:this.props.items,itemOrder:a})}},{key:"toggleCategory",value:function(e){var t=this.state.openedItems;t.has(e)?t.delete(e):t.add(e),this.setState({openedItems:t})}},{key:"onDragEnd",value:function(e){var t=this;if(e.destination){var n=function(e,t,n){var a=Array.from(e),i=a.splice(t,1),o=Object(l.a)(i,1)[0];return a.splice(n,0,o),a}(this.state.itemOrder,e.source.index,e.destination.index),a=function(e,t){for(var n=new Array(e.length),a=0;a<t.length;a++)n[a]=e[t[a]];return n}(this.props.items,n);this.props.initHotkeyMap(a,(function(){return t.setState({itemOrder:n,orderedItems:a})}))}}},{key:"render",value:function(){var e=this,t=this.state.orderedItems,n=this.state.openedItems;return i.a.createElement("div",{id:"category-hierarchy-tree"},i.a.createElement(v.a,{onDragEnd:this.onDragEnd},i.a.createElement(v.c,{droppableId:"droppable"},(function(a,o){return i.a.createElement("ul",Object.assign({},a.droppableProps,{className:"draggable-list"+(o.isDraggingOver?" dragging":""),ref:a.innerRef}),t.map((function(t,a){return i.a.createElement(N,{key:a,item:t,index:a,onClick:e.toggleCategory.bind(e),open:n.has(t.name),openedItems:e.state.openedItems,hotkeyMap:e.props.hotkeyMap,hotkeyChain:e.props.hotkeyChain,isTopLevelCategory:!0,applyTag:e.props.applyTag})})),a.placeholder)}))))}}]),n}(a.Component);function A(e,t){return t[e.split("/").slice(0,1)[0]]}var T=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.entityClass.split("/"),n=t.length>1?"/":"";return n+=t[t.length-1],i.a.createElement("span",{className:"label tag-"+this.props.colourIdx,onClick:function(t){e.props.deleteTag(e.props.entityClass)}},i.a.createElement("span",{className:"label-name"},n))}}]),n}(a.Component),P=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={selected:!1},a.wordInnerRef=i.a.createRef(),a}return Object(u.a)(n,[{key:"deleteTag",value:function(e){this.props.deleteTag(this.props.index,e)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this,t=this.props.entityClasses.length>0,n=t?" tag "+("B"===this.props.bioTag?"tag-begin":"")+(this.props.isLastInSpan?" tag-end":""):"";if(t)var a=this.props.entityClasses.map((function(t,n){return i.a.createElement(T,{deleteTag:e.deleteTag.bind(e),key:n,bioTag:e.props.bioTag,entityClass:t,colourIdx:A(t,e.props.entityColourMap)})}));else a="";var o=t?" tag-"+A(this.props.entityClasses[0],this.props.entityColourMap):"";return i.a.createElement("span",{className:"word"+(this.props.selected?" selected":"")+n},i.a.createElement("span",{className:"word-inner"+o,ref:this.wordInnerRef,onMouseUp:function(){return e.props.updateSelections(e.props.index,"up")},onMouseDown:function(){return e.props.updateSelections(e.props.index,"down")}},this.props.text),a)}}]),n}(a.Component),M=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.docIdx,n=this.props.value;return i.a.createElement("span",{className:"confidence-button conf-"+n+(this.props.checked?" checked":""),onClick:function(){return e.props.updateConfidence(t,n)},title:"Assign a "+n+" confidence to this document."})}}]),n}(a.Component),G=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"confidence-buttons"},i.a.createElement(M,Object.assign({value:"low",checked:"low"===this.props.confidence},this.props)),i.a.createElement(M,Object.assign({value:"medium",checked:"medium"===this.props.confidence},this.props)),i.a.createElement(M,Object.assign({value:"high",checked:"high"===this.props.confidence},this.props)))}}]),n}(a.Component),q=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"document-container header"},i.a.createElement("div",{className:"document header"},i.a.createElement("div",{className:"sentence-index"}),i.a.createElement("div",{className:"sentence"},"Document"),i.a.createElement("div",{className:"confidence-buttons"},"Confidence")))}}]),n}(a.Component),R=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"document-container"+(this.props.confidence?" conf conf-"+this.props.confidence:"")},i.a.createElement("div",{className:"document"},i.a.createElement("div",{className:"sentence-index"},i.a.createElement("span",{className:"inner"},this.props.displayIndex)),i.a.createElement(D,{index:this.props.index,words:this.props.words,annotations:this.props.annotations,selections:this.props.selections,updateSelections:this.props.updateSelections,entityColourMap:this.props.entityColourMap,deleteTag:this.props.deleteTag}),i.a.createElement(G,{docIdx:this.props.index,confidence:this.props.confidence,updateConfidence:this.props.updateConfidence})))}}]),n}(a.Component),D=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"updateSelections",value:function(e,t){this.props.updateSelections(this.props.index,e,t)}},{key:"deleteTag",value:function(e,t){this.props.deleteTag(this.props.index,e,t)}},{key:"saveToPng",value:function(){var e=this,t=f()("#sentence-tagging .sentence")[this.props.index+1];k.a.toBlob(t,{filter:function(e){return e.classList?!e.classList.contains("save-to-png"):e},bgcolor:"#fefefe"}).then((function(t){Object(b.saveAs)(t,"document-"+e.props.index+".png")}))}},{key:"render",value:function(){var e=this,t=this.props.selections;function n(e){if(0===t.length)return!1;for(var n=0;n<t.length;n++){var a=t[n];if(!(a.wordEndIndex<0)&&(a.wordEndIndex>=e&&e>=a.wordStartIndex))return!0}return!1}return i.a.createElement("div",{className:"sentence"},this.props.words.map((function(t,a){return i.a.createElement(P,{key:a,index:a,text:t,selected:n(a),entityClasses:e.props.annotations[a].entityClasses||[],isLastInSpan:e.props.annotations[a].isLastInSpan(),bioTag:e.props.annotations[a].bioTag,updateSelections:e.updateSelections.bind(e),entityColourMap:e.props.entityColourMap,deleteTag:e.deleteTag.bind(e)})})),i.a.createElement("div",{className:"save-to-png",onClick:this.saveToPng.bind(this),title:"Click to download a .png file of this document"},i.a.createElement("i",{className:"fa fa-download"})))}}]),n}(a.Component);function L(e){if(e.hasChildNodes())return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}var H=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.entityClass;return void 0===e&&(e="(not a valid class)"),i.a.createElement("div",{className:"hotkey-info"+(0===this.props.chain.length?" hidden":"")},i.a.createElement("span",{className:"chain"},this.props.chain),": ",i.a.createElement("span",null,e))}}]),n}(a.Component),U=function(){function e(t,n){Object(c.a)(this,e),this.token=t,this.tokenIndex=n,this.bioTag="O"}return Object(u.a)(e,[{key:"addLabel",value:function(e,t,n,a,i){void 0===this.entityClasses&&(this.entityClasses=new Array);var o=-1!==this.entityClasses.indexOf(t);return(this.bioTag!==e||this.spanText!==n||this.spanStartIdx!==a||this.spanEndIdx!==i||!o)&&(this.bioTag=e,this.spanText=n,this.spanStartIdx=a,this.spanEndIdx=i,o||this.entityClasses.push(t),!0)}},{key:"removeAllLabels",value:function(){delete this.entityClasses,delete this.spanText,delete this.spanStartIdx,delete this.spanEndIdx,this.bioTag="O"}},{key:"sameMention",value:function(e){return e.spanStartIdx===this.spanStartIdx&&e.spanEndIdx===this.spanEndIdx}},{key:"sameEntityClasses",value:function(e){return y.a.isEqual(this.entityClasses,e.entityClasses)}},{key:"removeLabel",value:function(e){var t=this.entityClasses.indexOf(e);-1!==t?(this.entityClasses.splice(t,1),0===this.entityClasses.length&&(this.bioTag="O",delete this.entityClasses,delete this.spanText,delete this.spanStartIdx,delete this.spanEndIdx)):console.log("Warning: tried to remove an entity class from an annotation that did not exist.")}},{key:"changeBioTag",value:function(e){this.bioTag=e}},{key:"hasLabel",value:function(){return"O"!==this.bioTag}},{key:"isLastInSpan",value:function(){return this.spanEndIdx===this.tokenIndex}},{key:"setSpanStartIdx",value:function(e){this.spanStartIdx=e}},{key:"setSpanEndIdx",value:function(e){this.spanEndIdx=e}},{key:"prettyPrint",value:function(){console.log("Token:    ",this.token),console.log("BIO Tag:  ",this.bioTag),console.log("Span:     ",this.spanText),console.log("StartIdx: ",this.spanStartIdx),console.log("EndIdx: ",this.spanEndIdx),console.log("Classes:  \n",this.entityClasses),console.log("\n")}}]),e}();var W=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._isMounted=!1,a.state={visible:!0,querying:!1,wikipediaSummary:null,wikipediaReadMoreUrl:null},a}return Object(u.a)(n,[{key:"queryWikipedia",value:function(){var e=this;if(!this.state.querying){var t=this.props.tokens;this.setState({querying:!0},(function(){var n,a,i,o=e;i=function(e,i,s){if(o._isMounted){var r=t;i?(e.toLowerCase()!==t.toLowerCase()&&(r=e),n=i+"...",a=s):(a=null,n=null),o.setState({wikipediaTitle:r,wikipediaSummary:n,wikipediaReadMoreUrl:a,querying:!1})}},f.a.ajax({url:"https://en.wikipedia.org/w/api.php",data:{action:"query",list:"search",srsearch:t,format:"json"},dataType:"jsonp",success:function(e){!function(e,t){try{t(e.query.search[0].title,e.query.search[0].snippet.replace(/<\/?[^>]+(>|$)/g,""),"https://en.wikipedia.org/wiki/"+e.query.search[0].title.replace(/ /g,"_"))}catch(n){t()}}(e,i)}})}))}}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"toggleVisibility",value:function(){this.setState({visible:!this.state.visible})}},{key:"componentDidUpdate",value:function(e,t){e.tokens!==this.props.tokens&&this.queryWikipedia()}},{key:"render",value:function(){if(!this.state.querying&&this.state.wikipediaTitle&&this.state.wikipediaTitle!==this.props.tokens)var e=i.a.createElement("span",{className:"different"},"[",this.state.wikipediaTitle,"] ");else e="";var t=this.state.wikipediaSummary?this.state.wikipediaSummary:"(no Wikipedia entry)";return this.props.tokens||(t="Select one or more words to automatically look them up on Wikipedia."),this.state.querying&&(t=i.a.createElement("span",null,i.a.createElement("i",{className:"fa fa-spin fa-cog"}),"\xa0\xa0Loading...")),i.a.createElement("div",{className:"tokens-info"},i.a.createElement("div",{id:"wikipedia-summary-container",className:this.state.visible?"show":"hidden"},i.a.createElement("p",{className:"tokens"},this.props.tokens||"Wikipedia lookup"),i.a.createElement("p",{className:"summary"},e,t),i.a.createElement("span",{className:"more show"},(this.state.querying||!this.props.tokens)&&i.a.createElement("span",{className:"left",style:{color:"rgba(0, 0, 0, 0)"}},"."),!this.state.querying&&this.props.tokens&&i.a.createElement("span",{className:"left"},"Results from Wikipedia"),i.a.createElement("span",{className:"right"},!this.state.querying&&this.props.tokens&&i.a.createElement("a",{id:"ec-read-more",href:this.state.wikipediaReadMoreUrl,target:"_blank"},"Read more ",i.a.createElement("i",{className:"fa fa-sm fa-external-link"}))))),i.a.createElement("button",{id:"wikipedia-hide-show",className:this.state.visible?"up":"down",onClick:this.toggleVisibility.bind(this)},"Show"))}}]),n}(a.Component),B=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={project_id:"RtJp98vxk",data:{documentGroup:[],categoryHierarchy:{children:[]},pageNumber:-1,annotatedDocGroups:-1,username:""},documentGroupAnnotationId:null,annotations:[],confidences:[],selections:a.getEmptySelectionsArray(10),currentSelection:a.getEmptyCurrentSelection(),mostRecentSelectionText:null,hotkeyMap:{},reverseHotkeyMap:{},terminalHotkeys:new Set,hotkeyChain:[],hotkeyBindingFn:null,hotkeyTimeoutFn:null,holdingCtrl:!1,holdingShift:!1,entityColourMap:{},docGroupLastModified:null,pageNumber:-1,totalPagesAvailable:-1,changesMade:!1,recentlySaved:!1,selectionChangeFn:null,windowMouseUpFn:null,loading:{querying:!0,saving:!1,firstLoad:!0},showingProgressBar:!1,taggingCompletePage:!1},a}return Object(u.a)(n,[{key:"selectionChange",value:function(e,t){if(!(this.state.currentSelection.wordStartIndex<0)){var n=window.getSelection&&window.getSelection();if(n&&n.rangeCount>0){var a=function(e){var t=e.startContainer,n=e.endContainer;if(t==n)return[t.parentNode];for(var a=[];t&&t!=n;)a.push(t=L(t));for(t=e.startContainer;t&&t!=e.commonAncestorContainer;)a.unshift(t),t=t.parentNode;return a}(n.getRangeAt(0));t.removeClass("highlighted"),f()(a).find(".word-inner").addClass("highlighted")}}}},{key:"windowMouseUp",value:function(e,t){if(!e.target.classList.contains("page-input"))if(t.removeClass("highlighted"),this.state.currentSelection.wordStartIndex<0)I();else if(!e.target.classList.contains("word-inner")){var n=this.state.currentSelection.sentenceIndex;this.updateSelections(n,this.state.data.documentGroup[n].length-1,"up")}}},{key:"initMouseEvents",value:function(){var e=this,t=f()(".word-inner");document.removeEventListener("selectionchange",this.state.selectionChangeFn),window.removeEventListener("mouseup",this.state.windowMouseUpFn),this.setState({selectionChangeFn:function(n){return e.selectionChange(n,t)},windowMouseUpFn:function(n){return e.windowMouseUp(n,t)}},(function(){document.addEventListener("selectionchange",e.state.selectionChangeFn),window.addEventListener("mouseup",e.state.windowMouseUpFn)}))}},{key:"initKeybinds",value:function(){var e=this;document.addEventListener("keydown",(function(t){switch(t.key){case"Shift":e.state.holdingShift||e.setState({holdingShift:!0});break;case"Control":e.state.holdingCtrl||e.setState({holdingCtrl:!0});break;case"ArrowLeft":t.preventDefault(),e.moveSelectionHorizontally("left");break;case"ArrowUp":t.preventDefault(),e.moveSelectionVertically("up");break;case"ArrowRight":t.preventDefault(),e.moveSelectionHorizontally("right");break;case"ArrowDown":t.preventDefault(),e.moveSelectionVertically("down")}})),document.addEventListener("keyup",(function(t){switch(t.key){case"Shift":e.state.holdingShift&&e.setState({holdingShift:!1});break;case"Control":e.state.holdingCtrl&&e.setState({holdingCtrl:!1})}}))}},{key:"hotkeyTimeout",value:function(){var e=this.state.hotkeyChain.join(""),t=this.state.reverseHotkeyMap[e];void 0!==t&&this.applyTag(t),window.clearTimeout(this.state.hotkeyTimeoutFn),this.setState({hotkeyTimeoutFn:null,hotkeyChain:[]})}},{key:"bindHotkeys",value:function(e,t){var n=this;if(!(e.keyCode<49||e.keyCode>57)){var a=e.keyCode-48;if(!f()("#page-input").is(":focus")){var i=Array.prototype.concat(this.state.hotkeyChain,a);this.setState({hotkeyChain:i},(function(){if(window.clearTimeout(n.state.hotkeyTimeoutFn),n.state.terminalHotkeys.has(i.join("")))n.hotkeyTimeout();else{var e=window.setTimeout((function(){return n.hotkeyTimeout()}),333);n.setState({hotkeyTimeoutFn:e})}}))}}}},{key:"setupHotkeyKeybinds",value:function(){var e=this;console.log("Setting up hotkey keybinds..."),console.log(this.state.reverseHotkeyMap),document.removeEventListener("keydown",this.state.hotkeyBindingFn);var t=function(t){return e.bindHotkeys(t,e.state.hotkeyMap)};document.addEventListener("keydown",t),this.setState({hotkeyBindingFn:t})}},{key:"initHotkeyMap",value:function(e,t){var n=this;console.log("Setting up hotkey map...");var a=function e(t,n,a,i,o,s){if(s||(a[t.full_name]=i),t.children)for(var r=0;r<Math.min(9,t.children.length);r++)e(t.children[r],r+1,a,Array.prototype.concat(i,r+1),o);else o.add(i.join(""));return{hotkeyMap:a,terminalHotkeys:o}}({children:e},0,[],[],new Set,!0),i=a.hotkeyMap,o=a.terminalHotkeys,s=function(e){var t={};for(var n in e){t[e[n].join("")]=n}return t}(i);this.setState({hotkeyMap:i,reverseHotkeyMap:s,terminalHotkeys:o},(function(){n.setupHotkeyKeybinds(),t&&t()}))}},{key:"initAnnotationsArray",value:function(e,t){var n=new Array(e.length);for(var a in e)for(var i in n[a]=new Array(e[a].length),e[a])n[a][i]=new U(e[a][i],parseInt(i));if(!t)return n;for(var a in t)for(var o in t[a].mentions){var s=t[a].mentions[o],r=s.start,l=s.end;for(var c in s.labels)for(var u=s.labels[c],p=r;p<l;p++){var d=p===r?"B":"I";n[a][p].addLabel(d,u,e[a].slice(r,l).join(" "),r,l-1)}}return n}},{key:"initConfidencesArray",value:function(e){return new Array(e.length)}},{key:"initEntityColourMap",value:function(e){var t={};for(var n in e){var a=e[n];t[a.name]=a.colorId+1}return t}},{key:"justifyWords",value:function(){f()(".word-inner").each((function(e,t){var n=t.offsetWidth,a=25*Math.ceil(n/25);f()(t).css("min-width",a+"px")}))}},{key:"clearWordJustification",value:function(){f()(".word:not(.tag) .word-inner").each((function(e,t){f()(t).css("min-width","auto")}))}},{key:"loadNextPage",value:function(){var e=this.state.pageNumber+1;e===this.state.totalPagesAvailable?this.queryAPI(!1):this.queryAPI(!1,e)}},{key:"goToPage",value:function(e){e===this.state.totalPagesAvailable?this.queryAPI(!1):this.queryAPI(!1,e)}},{key:"loadPreviousPage",value:function(){this.queryAPI(!1,this.state.pageNumber-1)}},{key:"queryAPI",value:function(e,t){var n={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},a="getDocumentGroup";t&&(a="getPreviouslyAnnotatedDocumentGroup?pageNumber="+t),this.setState({loading:{querying:!0,saving:!1,firstLoad:e}},function(){var t=this;fetch("http://localhost:3000/projects/"+this.props.project_id+"/tagging/"+a,n).then((function(e){return e.text()})).then((function(n){try{var a=JSON.parse(n)}catch(i){return void alert(i)}if(a.tagging_complete)return console.log(a),void t.setState({taggingCompletePage:!0,totalPagesAvailable:a.annotatedDocGroups+1,pageNumber:a.annotatedDocGroups+1,changesMade:!1,recentlySaved:!1,loading:{querying:!1,saving:!1},data:{username:a.username,projectName:a.projectName,documentGroup:[],categoryHierarchy:{children:[]},pageNumber:-1,annotatedDocGroups:-1}});t.setState({data:a,entityColourMap:t.initEntityColourMap(a.categoryHierarchy.children),confidences:t.initConfidencesArray(a.documentGroup),annotations:t.initAnnotationsArray(a.documentGroup,a.automaticAnnotations),selections:t.getEmptySelectionsArray(a.documentGroup.length),mostRecentSelectionText:null,pageNumber:a.pageNumber,totalPagesAvailable:a.annotatedDocGroups+1,docGroupLastModified:a.lastModified,documentGroupAnnotationId:a.documentGroupAnnotationId,changesMade:!1,recentlySaved:!1,loading:{querying:!1,saving:!1},taggingCompletePage:!1},(function(){console.log("Data:",t.state.data),e&&(t.initKeybinds(),t.initHotkeyMap(t.state.data.categoryHierarchy.children)),t.initMouseEvents(),t.clearWordJustification(),t.justifyWords(),t.selectFirstWord(),window.scrollTo(0,0)}))}))}.bind(this))}},{key:"annotationsToJSON",value:function(){var e=this.state.annotations,t=[];for(var n in e){var a=[];for(var i in e[n]){var o=e[n][i];o.entityClasses?a.push([o.bioTag+"-",o.entityClasses]):a.push([""])}t.push(a)}return t}},{key:"submitAnnotations",value:function(){var e=this;if(!this.state.recentlySaved){var t=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var i=n[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return t}("csrf-token"),n=this.annotationsToJSON(),a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","csrf-token":t},dataType:"json",body:JSON.stringify({documentGroupId:this.state.data.documentGroupId,documentGroupAnnotationId:this.state.documentGroupAnnotationId,labels:n})};this.setState({loading:{querying:!1,saving:!0}},(function(){fetch("http://localhost:3000/projects/"+e.state.project_id+"/tagging/submitAnnotations",a).then((function(e){return e.text()})).then((function(t){try{var n=JSON.parse(t);console.log(n);var a=n.documentGroupAnnotationId;if(console.log("Submitted annotations OK"),e.state.pageNumber===e.state.totalPagesAvailable){var i=e.state.totalPagesAvailable+1;e.setState({showingProgressBar:!0},(function(){window.setTimeout((function(){return e.setState({showingProgressBar:!1})}),3e3)}))}else i=e.state.totalPagesAvailable;e.setState({docGroupLastModified:Date.now(),totalPagesAvailable:i,changesMade:!1,recentlySaved:!0,documentGroupAnnotationId:a,loading:{querying:!1,saving:!1}})}catch(o){console.log("ERROR:",o),alert(t)}}))}))}}},{key:"componentWillMount",value:function(){this.queryAPI(!0)}},{key:"getEmptyCurrentSelection",value:function(){return{wordStartIndex:-1,wordEndIndex:-1,sentenceIndex:-1}}},{key:"moveSelectionVertically",value:function(e){console.log("Moving",e)}},{key:"moveSelectionHorizontally",value:function(e){console.log("Moving",e);for(var t,n=this.state.selections,a=0;a<n.length;a++)for(var i=0;i<n[a].length;i++){var o=n[a][i];"left"===e?this.state.holdingShift?o.wordEndIndex>o.wordStartIndex?o.wordEndIndex--:o.wordStartIndex=Math.max(o.wordStartIndex-1,0):(o.wordStartIndex=Math.max(o.wordStartIndex-1,0),o.wordEndIndex=o.wordStartIndex):"right"===e&&(this.state.holdingShift||(o.wordStartIndex=Math.min(this.state.data.documentGroup[a].length-1,o.wordEndIndex+1)),o.wordEndIndex=Math.min(this.state.data.documentGroup[a].length-1,o.wordEndIndex+1)),t=this.state.data.documentGroup[a].slice(o.wordStartIndex,o.wordEndIndex+1).join(" ")}this.setState({selections:n,mostRecentSelectionText:t})}},{key:"getEmptySelectionsArray",value:function(e){if(!e)e=this.state.data.documentGroup.length;for(var t=new Array(e),n=0;n<t.length;n++)t[n]=new Array;return t}},{key:"selectFirstWord",value:function(){var e=this.state.selections;e[0].push({wordStartIndex:0,wordEndIndex:0}),this.setState({selections:e,mostRecentSelectionText:this.state.data.documentGroup[0][0]})}},{key:"clearSelections",value:function(){this.setState({currentSelection:this.getEmptyCurrentSelection(),selections:this.getEmptySelectionsArray()})}},{key:"updateSelections",value:function(e,t,n){var a,i,o=this.state.selections,s=this.state.currentSelection;if("down"===n)this.state.holdingCtrl||(o=this.getEmptySelectionsArray()),i=-1,s={sentenceIndex:e,wordStartIndex:a=t};else if("up"===n){if(-1===s.wordStartIndex)return void this.clearSelections();if(a=s.wordStartIndex,s.sentenceIndex!==e&&(a=0),i=t,t<a){var r=a;a=t,i=r}s=this.getEmptyCurrentSelection(),o[e].push({wordStartIndex:a,wordEndIndex:i});var l=this.state.data.documentGroup[e].slice(a,i+1).join(" ");I()}this.setState({currentSelection:s,selections:o,mostRecentSelectionText:l||this.state.mostRecentSelectionText})}},{key:"applyTag",value:function(e){var t=this,n=this.state.selections,a=this.state.data.documentGroup,i=this.state.annotations;for(var o in n)for(var s in n[o]){for(var r=n[o][s],l=r.wordStartIndex,c=r.wordEndIndex,u=i[o][l].spanStartIdx,p=i[o][l].spanEndIdx,d=!1,h=l+1;h<=c;h++){var m=i[o][h];if(u!==m.spanStartIdx||p!==m.spanEndIdx){d=!0;break}}if(d){for(h=l;h<=c;h++){(v=i[o][h]).removeAllLabels()}for(var g in i[o]){(v=i[o][g]).spanEndIdx>=l&&v.spanStartIdx<=l&&v.setSpanEndIdx(l-1),v.spanStartIdx<=c&&(v.setSpanStartIdx(c+1),v.tokenIndex===c+1&&v.changeBioTag("B"))}}for(var f in i[o].slice(0,l)){(v=i[o][f]).spanStartIdx<l&&v.spanEndIdx>=c&&v.setSpanEndIdx(l-1)}for(var f in i[o].slice(c+1,i[o].length)){var v;(v=i[o][parseInt(f)+c+1]).spanStartIdx<=l&&v.spanEndIdx>=c&&(v.setSpanStartIdx(c+1),"0"===f&&v.changeBioTag("B"))}var y=!1;for(h=l;h<=c;h++){var b=h===l?"B":"I",E=a[o].slice(l,c+1).join(" ");y=i[o][h].addLabel(b,e,E,l,c)}y&&this.captureEvent("Applied label",parseInt(o),l,c,e)}this.setState({annotations:i},(function(){t.justifyWords()}))}},{key:"deleteTag",value:function(e,t,n){var a=this.state.annotations,i=a[e][t],o=i.spanStartIdx,s=i.spanEndIdx;for(var r in this.captureEvent("Deleted label",e,o,s,n),a[e]){var l=a[e][r];l.spanStartIdx===o&&l.spanEndIdx===s&&l.removeLabel(n)}this.setState({annotations:a})}},{key:"updateConfidence",value:function(e,t){var n=this.state.confidences;n[e]===t?n[e]=void 0:n[e]=t,this.setState({confidences:n})}},{key:"captureEvent",value:function(e,t,n,a,i){this.state.data.documentGroup[t].slice(n,a+1).join(" ");"Applied label"!==e&&"Deleted label"!==e||this.setState({changesMade:!0,recentlySaved:!1})}},{key:"render",value:function(){var e=this,t=this.state.taggingCompletePage;return i.a.createElement("div",null,i.a.createElement("div",{id:"tagging-interface",className:(this.state.loading.querying?"loading":"")+(t?" tagging-complete-page":"")},i.a.createElement("div",{id:"tagging-container"},t&&i.a.createElement(V,null),i.a.createElement("div",{id:"sentence-tagging"},this.state.loading.firstLoad&&i.a.createElement("div",{className:"loading-message"},i.a.createElement("i",{className:"fa fa-cog fa-spin"}),"Loading..."),i.a.createElement(Y,{showingProgressBar:this.state.showingProgressBar,pageNumber:this.state.pageNumber,totalPages:this.state.data.docGroupsPerUser,totalPagesAvailable:this.state.totalPagesAvailable,lastModified:this.state.docGroupLastModified,recentlySaved:this.state.recentlySaved,changesMade:this.state.changesMade,querying:this.state.loading.querying,saving:this.state.loading.saving,submitAnnotations:this.submitAnnotations.bind(this),loadPreviousPage:this.loadPreviousPage.bind(this),loadNextPage:this.loadNextPage.bind(this),goToPage:this.goToPage.bind(this)}),i.a.createElement(q,null),this.state.data.documentGroup.map((function(t,n){return i.a.createElement(R,{key:n,index:n,displayIndex:10*(e.state.pageNumber-1)+n+1,words:t,annotations:e.state.annotations[n],confidence:e.state.confidences[n],selections:e.state.selections[n],updateSelections:e.updateSelections.bind(e),updateConfidence:e.updateConfidence.bind(e),entityColourMap:e.state.entityColourMap,deleteTag:e.deleteTag.bind(e)})})))),i.a.createElement("div",{id:"tagging-menu"},i.a.createElement(W,{tokens:this.state.mostRecentSelectionText}),i.a.createElement(H,{chain:this.state.hotkeyChain,entityClass:this.state.reverseHotkeyMap[this.state.hotkeyChain.join("")]}),i.a.createElement(O,{items:this.state.data.categoryHierarchy.children,hotkeyMap:this.state.hotkeyMap,hotkeyChain:this.state.hotkeyChain.join(""),initHotkeyMap:this.initHotkeyMap.bind(this),applyTag:this.applyTag.bind(this)}))))}}]),n}(a.Component),F=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=" disabled";this.props.changesMade&&(e=""),this.props.recentlySaved&&(e=" recently-saved"),this.props.saving&&(e=" saving");var t="fa-save";this.props.recentlySaved&&(t="fa-check"),this.props.saving&&(t="fa-cog fa-spin");var n="Save";return this.props.recentlySaved&&(n="Saved"),this.props.saving&&(n="Saving"),i.a.createElement("button",{className:"save-button"+e,onClick:this.props.submitAnnotations},i.a.createElement("i",{className:"fa "+t}),n)}}]),n}(a.Component),J=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{id:"tagging-progress-bar",className:this.props.show?"show":"hide"},i.a.createElement("span",{className:"progress-bar"},i.a.createElement("span",{className:"inner",style:{width:(this.props.totalPagesAvailable-1)/this.props.totalPages*100+"%"}})))}}]),n}(a.Component),Y=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={pageNumber:null,pageNumberError:!1},a.pageInputRef=i.a.createRef(),a}return Object(u.a)(n,[{key:"clearPageNumberInput",value:function(){var e=f()(this.pageInputRef.current);e.val(""),e.blur()}},{key:"goToPage",value:function(e){var t=this;return this.clearPageNumberInput(),""===this.state.pageNumber?(this.setState({pageNumber:this.props.pageNumber}),e.preventDefault(),null):(this.state.pageNumber<1?this.setState({pageNumber:1},(function(){t.props.goToPage(t.state.pageNumber)})):this.state.pageNumber>this.props.totalPagesAvailable?this.setState({pageNumber:this.props.totalPagesAvailable},(function(){t.props.goToPage(t.state.pageNumber)})):this.props.goToPage(this.state.pageNumber),e.preventDefault(),null)}},{key:"componentDidUpdate",value:function(e,t){this.props.pageNumber!==e.pageNumber&&this.setState({pageNumber:this.props.pageNumber})}},{key:"changePageNumber",value:function(e){this.setState({pageNumber:e.target.value})}},{key:"render",value:function(){var e=this,t=i.a.createElement("span",{className:"group-name"+(this.props.showingProgressBar?" progress-bar-underneath":"")},i.a.createElement("span",null,"Group ",i.a.createElement("b",null,i.a.createElement("form",{onSubmit:this.goToPage.bind(this)},i.a.createElement("input",{id:"page-input",className:"page-input"+(this.state.pageNumberError?" error":""),placeholder:this.state.pageNumber,name:"page-input",onChange:function(t){return e.changePageNumber(t)},ref:this.pageInputRef})))," of ",i.a.createElement("b",null,this.props.totalPages))),n=this.props.totalPagesAvailable===this.props.pageNumber,a=this.props.changesMade?this.props.saving?"":"Changes not saved":this.props.lastModified?"Saved on "+C(this.props.lastModified,"dd mmm")+" at "+C(this.props.lastModified,"h:MM tt"):"";return i.a.createElement("div",{id:"pagination"},i.a.createElement("div",{className:"page-button-container previous-page"},i.a.createElement("button",{className:1===this.props.pageNumber?" disabled":"",onClick:this.props.loadPreviousPage},i.a.createElement("i",{className:"fa fa-chevron-left"}),"Prev")),i.a.createElement("div",{className:"filler-left"}),i.a.createElement("div",{className:"current-page-container"},t,i.a.createElement(J,{show:this.props.showingProgressBar,totalPagesAvailable:this.props.totalPagesAvailable,totalPages:this.props.totalPages})),i.a.createElement("div",{className:"group-last-modified"},a),i.a.createElement("div",{className:"page-button-container "},i.a.createElement(F,{changesMade:this.props.changesMade,recentlySaved:this.props.recentlySaved,saving:this.props.saving,submitAnnotations:this.props.submitAnnotations})),i.a.createElement("div",{className:"page-button-container next-page"},i.a.createElement("button",{className:n?" disabled":"",onClick:this.props.loadNextPage},"Next",i.a.createElement("i",{className:"fa fa-chevron-right"}))))}}]),n}(a.Component),V=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{id:"tagging-complete-message"},i.a.createElement("span",{class:"tagging-complete-text"},i.a.createElement("h2",null,"Annotation complete!"),i.a.createElement("p",null,"Thank you for your participation in this project.")))}}]),n}(a.Component),K=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("main",{class:"error-page"},i.a.createElement("h1",null,"404: Page not found."),i.a.createElement("p",null,"The page you were looking for does not appear to exist."))}}]),n}(a.Component),Z=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("p",null,"Hello I am a homepage"),i.a.createElement("p",null,i.a.createElement(S.b,{to:"/projects"},"open project")))}}]),n}(a.Component),Q=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("p",null,"Hello I am the projects list page"),i.a.createElement("p",null,i.a.createElement(S.b,{to:"/projects/-krXeW3R2/tagging"},"open project")))}}]),n}(a.Component),X=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(x,{pageTitle:this.props.pageTitle,username:this.props.username}),i.a.createElement("main",null,this.props.pageComponent))}}]),n}(a.Component),z=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(x,{pageTitle:this.props.pageTitle,username:this.props.username}),this.props.pageComponent)}}]),n}(a.Component),_=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={pageTitle:"Redcoat",username:"???"},a}return Object(u.a)(n,[{key:"componentWillMount",value:function(){var e=this;console.log(window.SERVER_DATA);var t={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};this.setState({loading:!0},(function(){fetch("http://localhost:3000/pageData",t).then((function(e){return e.text()})).then((function(t){console.log(t);var n=JSON.parse(t);e.setState({username:n.username,loading:!1})}))}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"app",class:this.state.loading?"loading":""},i.a.createElement(S.a,null,i.a.createElement(w.c,null,i.a.createElement(w.a,{path:"/projects/:id/tagging",render:function(t){return i.a.createElement(z,Object.assign({},e.state,{pageComponent:i.a.createElement(B,{project_id:t.match.params.id})}))}}),i.a.createElement(w.a,{path:"/projects",render:function(){return i.a.createElement(X,Object.assign({},e.state,{pageTitle:"Projects",pageComponent:i.a.createElement(Q,null)}))}}),i.a.createElement(w.a,{path:"/features",render:function(){return i.a.createElement(X,Object.assign({},e.state,{pageTitle:"Features",pageComponent:i.a.createElement(j,null)}))}}),i.a.createElement(w.a,{exact:!0,path:"/",render:function(){return i.a.createElement(X,Object.assign({},e.state,{pageTitle:"",pageComponent:i.a.createElement(Z,null)}))}}),i.a.createElement(w.a,{render:function(){return i.a.createElement(X,Object.assign({},e.state,{pageTitle:"",pageComponent:i.a.createElement(K,null)}))}})," />")))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.ce850940.chunk.js.map